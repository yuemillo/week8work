import{_ as x,g as l,r as f,o as h,c as _,d as m,b as t,t as a,A as b,B as w,F as g,h as y,C as L,w as E,p as k,i as P}from"./index-JNT4IJuC.js";import{c as V}from"./cartStore-309sSctn.js";import"./sweetalert2.all-Fm7rLdqG.js";var R={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_NAME:"jslong",BASE_URL:"/week8work/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:n,VITE_NAME:p}=R,S={data(){return{isLoading:!0,product:{},products:[],selectedQty:1,category:"",categories:["近戰","遠程","輔助"]}},computed:{filteredProducts(){return this.products.filter(o=>o.category===this.category&&o.id!==this.product.id).slice(0,5)}},methods:{getProducts(){const{id:e}=this.$route.params,o=`${n}/v2/api/${p}/product/${e}`;l.get(o).then(c=>{this.product=c.data.product,this.category=c.data.product.category,this.isLoading=!1}).catch(c=>{console.error("Error fetching products:",c),this.isLoading=!1})},getProductsAll(){const e=`${n}/v2/api/${p}/products/all`;l.get(e).then(o=>{this.products=o.data.products,this.isLoading=!1}).catch(o=>{console.error("Error fetching products:",o),this.isLoading=!1})},async addProuctToCart(e,o){await V().addProuctToCart(e,o)},getCart(){l.get(`${n}/api/${p}/cart`).then(e=>{this.carts=e.data.data})}},beforeRouteEnter(e,o,c){const{id:u}=e.params,s=`${n}/v2/api/${p}/product/${u}`;l.get(s).then(r=>{c(d=>{d.product=r.data.product,d.category=r.data.product.category,d.isLoading=!1,window.scrollTo(0,0)})}).catch(r=>{console.error("Error fetching products:",r),c(!1)})},beforeRouteUpdate(e,o,c){const{id:u}=e.params,s=`${n}/v2/api/${p}/product/${u}`;l.get(s).then(r=>{this.product=r.data.product,this.category=r.data.product.category,this.isLoading=!1,window.scrollTo(0,0),c()}).catch(r=>{console.error("Error fetching products:",r),c(!1)})},mounted(){this.getProducts(),this.getProductsAll()}},T=e=>(k("data-v-6cb173d9"),e=e(),P(),e),C={class:"bg-primary py-5 mt90"},I={class:"container"},U={class:"d-flex py-3 px-3 bg-warning rounded-3 row"},A=["src","alt"],B={class:"hero-text ms-3 d-flex flex-column justify-content-between col-12 col-xl-6"},D={class:"hero-text-head"},M={class:"display-2 fw-black text-black mb-1"},$={class:"badge bg-primary rounded-pill fs-5 mb-1"},N={class:"fs-3 text-black pb-3"},Q={class:"fs-5 text-black pb-3"},j={class:"hero-text-footer align-items-end"},F=["value"],O={class:"d-flex"},q={class:"price-text"},z={class:"h6"},G={class:"h5"},H=T(()=>t("div",{class:"h3 my-3"},"推薦喵喵",-1)),J={class:"d-flex flex-wrap"},K={class:"d-flex flex-column align-items-center my-3"},W=["src","alt"],X={class:"text-black card-title mt-2"};function Y(e,o,c,u,s,r){const d=f("VueLoading"),v=f("RouterLink");return h(),_(g,null,[m(d,{active:s.isLoading},null,8,["active"]),t("div",C,[t("div",I,[t("div",U,[t("img",{src:s.product.imageUrl,class:"card-img-top col-12 col-xl-6",alt:s.product.title,style:{width:"550px"}},null,8,A),t("div",B,[t("div",D,[t("h3",M,a(s.product.title),1),t("span",$,a(s.product.category),1),t("p",N,a(s.product.description),1),t("p",Q,a(s.product.content),1)]),t("div",j,[b(t("select",{name:"",id:"",class:"form-select mb-3",style:{width:"300px"},"onUpdate:modelValue":o[0]||(o[0]=i=>s.selectedQty=i)},[(h(),_(g,null,y(20,i=>t("option",{value:i,key:i},a(i),9,F)),64))],512),[[w,s.selectedQty]]),t("div",O,[t("div",q,[t("del",z,"原價 "+a(s.product.origin_price)+" 元",1),t("div",G,"現在只要 "+a(s.product.price)+" 元",1)]),t("button",{type:"button",class:"btn btn-primary ms-auto",onClick:o[1]||(o[1]=L(i=>r.addProuctToCart(s.product.id,s.selectedQty),["prevent"]))},"加入購物車")])])])]),H,t("div",J,[(h(!0),_(g,null,y(r.filteredProducts,i=>(h(),_("div",{class:"col",key:i.id},[m(v,{to:`/product/${i.id}`,class:"text-decoration-none card-hover"},{default:E(()=>[t("div",K,[t("img",{src:i.imageUrl,class:"card-img-top",alt:i.title,style:{width:"150px"}},null,8,W),t("h5",X,a(i.title),1)])]),_:2},1032,["to"])]))),128))])])])],64)}const ot=x(S,[["render",Y],["__scopeId","data-v-6cb173d9"]]);export{ot as default};
