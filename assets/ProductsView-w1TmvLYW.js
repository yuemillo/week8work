import{_ as $,g as i,r as f,o as r,c,d as n,b as t,w as p,F as _,h as m,f as x,t as g}from"./index-JNT4IJuC.js";var v={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_NAME:"jslong",BASE_URL:"/week8work/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:d,VITE_NAME:l}=v,w={data(){return{isLoading:!0,products:[],categories:["近戰","遠程","輔助"],carts:{},status:{addCartLoading:""}}},watch:{"$route.query":{handler(){Object.keys(this.$route.query).length>0?this.getProducts():this.getProductsAll()},deep:!0}},methods:{getProductsAll(){const e=`${d}/v2/api/${l}/products/all`;i.get(e).then(o=>{this.products=o.data.products,this.isLoading=!1}).catch(o=>{console.error("Error fetching products:",o),this.isLoading=!1})},getProducts(){const{category:e=""}=this.$route.query,o=`${d}/v2/api/${l}/products?category=${e}`;i.get(o).then(a=>{this.products=a.data.products,this.isLoading=!1}).catch(a=>{console.error("Error fetching products:",a),this.isLoading=!1})},addToCart(e,o=1){const a={productID:e,qty:o};this.status.addCartLoading=e,i.post(`${d}/api/${l}/cart`,{data:a}).then(b=>{this.getCart(),this.$refs.userModal.close()})},getCart(){i.get(`${d}/api/${l}/cart`).then(e=>{this.carts=e.data.data})}},mounted(){this.getProductsAll()}},y={class:"bg-primary mt90"},k={class:"container"},E=t("h3",{class:"display-2 fw-black text-black text-center pt-5 mb-3"},"喵喵商城",-1),V=t("p",{class:"fs-3 text-black text-center pb-3"},"選擇您的喵喵英雄，你可以專攻一位，或是挑戰駕馭所有英雄。",-1),C={class:"d-flex list-unstyled flex-wrap"},P={class:"row row-cols-1 row-cols-md-4 g-4 pb-5"},R={class:"card bg-warning"},A=["src","alt"],T={class:"card-body"},N={class:"card-title"},B={class:"card-text"};function M(e,o,a,b,u,S){const L=f("VueLoading"),h=f("RouterLink");return r(),c(_,null,[n(L,{active:u.isLoading},null,8,["active"]),t("div",y,[t("div",k,[E,V,t("ul",C,[t("li",null,[n(h,{class:"fs-4 btn btn-info px-4 mb-1 me-3 rounded-pill text-nowrap mb-3",to:"/products"},{default:p(()=>[x("全部")]),_:1})]),(r(!0),c(_,null,m(u.categories,s=>(r(),c("li",{key:s},[n(h,{class:"fs-4 btn btn-info px-4 mb-1 me-3 rounded-pill text-nowrap",to:`/products?category=${s}`},{default:p(()=>[x(g(s),1)]),_:2},1032,["to"])]))),128))]),t("div",P,[(r(!0),c(_,null,m(u.products,s=>(r(),c("div",{class:"col",key:s.id},[n(h,{to:`/product/${s.id}`,class:"text-decoration-none card-hover"},{default:p(()=>[t("div",R,[t("img",{src:s.imageUrl,class:"card-img-top",alt:s.title},null,8,A),t("div",T,[t("h5",N,g(s.title),1),t("p",B,g(s.description),1)])])]),_:2},1032,["to"])]))),128))])])])],64)}const q=$(w,[["render",M]]);export{q as default};
